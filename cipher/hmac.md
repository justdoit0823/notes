HMAC
====

	密钥消息散列认证码，是一种使用密码散列函数，同时结合一个加密密钥，计算产生的消息认证码。既可以用来保证数据的完整性，又可以用作某个消息的身份认证。


计算公式
========


用来计算的数据
--------------

* 加密密钥(key)

* 消息(msg)

* 散列函数(hashfun,如md5, sha1)

* 计算常量字节串(5C, 36)



计算步骤
--------

* 根据散列函数来确定块的大小

		如果散列函数有块大小的话，直接用散列函数的，否则使用HMAC默认的64字节.


* 对齐key的长度到块大小

		如果key的长度超过了块大小的话，先进行一次散列; 否则, 不足的部分直接填充0.


* 初始化好两个散列块

		把对齐后的key用36常量字节串映射后来进行散列初始化得到inner, 把对齐后的key用5C常量字节串映射后进行初始化得到outer.

* 填充消息

		将消息填充到上一步中初始化好的inner中即可.

* 计算最终的散列值

		把填充消息后的inner整体计算得到的散列值当做outer的消息进行填充，然后得到最终的散列值.


计算公式
--------

	key = hash(key).digest() if len(key) > block_size else key + bytes(leftlen)
	HMAC(k, msg) = H((outer + key) + H((inner + key) + (msg)))
	outer + key 表示用key来进行初始化outer


文档引用
========

* <https://zh.wikipedia.org/wiki/%E9%87%91%E9%91%B0%E9%9B%9C%E6%B9%8A%E8%A8%8A%E6%81%AF%E9%91%91%E5%88%A5%E7%A2%BC>

* Python中的hmac模块
